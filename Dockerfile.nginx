FROM nginx:alpine

# Install certbot and openssl
RUN apk add --no-cache certbot openssl

# Copy initialization script
COPY init-ssl.sh /init-ssl.sh
RUN chmod +x /init-ssl.sh

# Copy nginx config
COPY nginx.conf /etc/nginx/nginx.conf

EXPOSE 80 443

CMD ["/bin/sh", "/init-ssl.sh"]